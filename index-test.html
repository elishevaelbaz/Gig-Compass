<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Gig Compass</title>


	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Prompt|Satisfy" rel="stylesheet">

	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

	<link rel="stylesheet" type="text/css" href="style.css">

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!--Import materialize.js, must go after jquery-->
	<script type="text/javascript" src="js/materialize.min.js"></script>

	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

	<script async defer  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVE0YZTBYmeFwStCIUt8mMgyfL7tLYYhU&callback=initGoogleMap"></script>

	<script type="text/javascript" src="app.js"></script>

	<script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>

</head>

<body>
	<nav>
		<div class="nav-wrapper blue-container">
			<a href="#!" class="brand-logo">Gig Compass</a>
			<ul class="right hide-on-med-and-down">
				<li>  <input id="keyword-input" type="search" value="" placeholder="Search"></li>
				<li><a class="waves-effect waves-light model-action modal-trigger" href="#modal-categories">Categories<i class="material-icons right">view_module</i></a></li>
				<li><a class="waves-effect waves-light modal-trigger" href="#modal-location">Location<i class="material-icons right">location_city</i></a></li>
				<li><a class="waves-effect waves-light modal-trigger" href="#modal-daterange">Date Range<i class="material-icons right">date_range</i></a></li>
				<li id="search-submit"><a href="collapsible.html"><i class="large material-icons">send</i></a></li>
			</ul>
		</div>
	</nav>

	<div id="modal-categories" class="modal">
		<ul class="collection">
			<li value="100" class="collection-item" id="categories"><i class="material-icons">music_note</i> Music</li>
			<li value="200" class="collection-item" id="categories"><i class="material-icons">golf_course</i> Sports</li>
			<li value="300" class="collection-item" id="categories"><i class="material-icons">child_friendly</i> Family</li>
			<li value="400" class="collection-item" id="categories"><i class="material-icons">tag_faces</i> Arts &amp; Theater</li>
		</ul>
	</div>

	<div id="modal-location" class="modal">
		<div class="row" id="form-location">
			<form class="col s12" >
				<div class="row">
					<div class="input-field col s12">
						<input id="city-input" type="text" value="">
						<label for="city-input">City:</label>
					</div>
					<div class="input-field col s12">
						<select id="state-input" >
							<option value="" disabled selected >State:</option>
							<option value="AL">Alabama</option>
							<option value="AK">Alaska</option>
							<option value="AZ">Arizona</option>
							<option value="AR">Arkansas</option>
							<option value="CA">California</option>
							<option value="CO">Colorado</option>
							<option value="CT">Connecticut</option>
							<option value="DE">Delaware</option>
							<option value="DC">District Of Columbia</option>
							<option value="FL">Florida</option>
							<option value="GA">Georgia</option>
							<option value="HI">Hawaii</option>
							<option value="ID">Idaho</option>
							<option value="IL">Illinois</option>
							<option value="IN">Indiana</option>
							<option value="IA">Iowa</option>
							<option value="KS">Kansas</option>
							<option value="KY">Kentucky</option>
							<option value="LA">Louisiana</option>
							<option value="ME">Maine</option>
							<option value="MD">Maryland</option>
							<option value="MA">Massachusetts</option>
							<option value="MI">Michigan</option>
							<option value="MN">Minnesota</option>
							<option value="MS">Mississippi</option>
							<option value="MO">Missouri</option>
							<option value="MT">Montana</option>
							<option value="NE">Nebraska</option>
							<option value="NV">Nevada</option>
							<option value="NH">New Hampshire</option>
							<option value="NJ">New Jersey</option>
							<option value="NM">New Mexico</option>
							<option value="NY">New York</option>
							<option value="NC">North Carolina</option>
							<option value="ND">North Dakota</option>
							<option value="OH">Ohio</option>
							<option value="OK">Oklahoma</option>
							<option value="OR">Oregon</option>
							<option value="PA">Pennsylvania</option>
							<option value="RI">Rhode Island</option>
							<option value="SC">South Carolina</option>
							<option value="SD">South Dakota</option>
							<option value="TN">Tennessee</option>
							<option value="TX">Texas</option>
							<option value="UT">Utah</option>
							<option value="VT">Vermont</option>
							<option value="VA">Virginia</option>
							<option value="WA">Washington</option>
							<option value="WV">West Virginia</option>
							<option value="WI">Wisconsin</option>
							<option value="WY">Wyoming</option>
						</select>	
					</div>
					<div class="input-field col s6">
						<input id="zip-input" type="text" value="">
						<label >Zip:</label>
					</div>
					<div class="input-field col s6">
						<label >Radius:</label>
						<input id="radius-input" type="range" min="5" max="50" />
					</div>
				</div>
			</form>
		</div>
	</div>


	<div id="modal-daterange" class="modal">
		<div class="row" id="form-daterange">
			<form>
				<div class="col s6">	
					<div>Selected Date:  <input type="text" class="datepicker"></div>
				</div>
				<div class="col s6">	
					<div>Selected Date:  <input type="text" class="datepicker"></div>
				</div>
			</form>
		</div>
	</div>


	<script type="text/javascript">

		var searchObj = {
			keyword : "",
			category : "",
			city : "",
			state : "",
			zip : "",
			radius : 5,
			fromDate : moment(),
			toDate : moment()
	}

	function setSearchParms() {
		// keyword
		searchObj.keyword = $("#keyword-input").val();

		// Category
		searchObj.category = "";
		if ($("#categories-selected")) {
			searchObj.category  = $("#categories-selected").val();
			searchObj.category = getCategory(searchObj.category);
		} 

		// city
		searchObj.city = $("#city-input").val();

		// state
		searchObj.state = $("#state-input option:selected").val();

		// zip
		searchObj.zip = $("#zip-input").val();

		// radius
		searchObj.radius = $("#radius-input").val();

		// from date
		searchObj.fromDate = moment();

		// to date
		searchObj.toDate = moment().add(7, 'days');

		console.log(searchObj);
	}

	function getCategory(categoryValue) {
		switch(categoryValue) {
			case 100:
			return "music";
			break;
			case 200:
			return "sports"
			break;
			case 300:
			return "family";
			break;
			case 400:
			return "arts-theater"
			break;
			default:
			return "";
		}
	}


	$('.modal').modal({
      dismissible: true, // Modal can be dismissed by clicking outside of the modal
      opacity: 0, // Opacity of modal background
      inDuration: 300, // Transition in duration
      outDuration: 200, // Transition out duration
      startingTop: '4%', // Starting top style attribute
      endingTop: '15%', // Ending top style attribute
      ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
        console.log(modal, trigger);
    },
    complete: function() { 

      } // Callback for Modal close
  });

	$('select').material_select();


   //  $('.datepicker').pickadate({
	  //   selectMonths: true, // Creates a dropdown to control month
	  //   selectYears: 15, // Creates a dropdown of 15 years to control year,
	  //   today: 'Today',
	  //   clear: 'Clear',
	  //   close: 'Ok',
	  //   closeOnSelect: false // Close upon selecting a date,
  	// });

  	$(document).on("click", "#categories", function() {
  		var selected = $("#categories-selected");

  		if (selected) {
  			selected.attr("id", "categories");
  		}
  		$(this).attr("id", "categories-selected");
  	});

  	$(document).on("click", "#categories-selected", function() {
  		$(this).attr("id", "categories");
  	});


  	$("#search-submit").on("click", function() {
  		event.preventDefault();

  		// set search parmaters in SearchParm object
  		setSearchParms();


  	});


  </script>

</body>
</html>